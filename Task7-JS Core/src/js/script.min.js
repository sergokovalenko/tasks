"use strict";var APP=APP||{};APP.createNamespace=function(t){var e=t.split("."),n=APP,r=0;for("APP"===e[r]&&(e=e.slice(1)),r=0;r<e.length;r+=1)void 0===n[e[r]]&&(n[e[r]]={}),n=n[e[r]];return n};var APP=APP||{};APP.createNamespace("APP.utilities.dateGenerator"),APP.utilities.dateGenerator=function(){function t(){var t=0,e=0;return t=r(1e3,a.getFullYear()),e=r(0,11),s=new Date(t,e),s.setDate(r(0,u(s))),s.setHours(r(0,23)),s.setMinutes(r(0,60)),s.setSeconds(r(0,60)),s}function e(){var e=t();return e.getFullYear()+" "+e.getMonth()+" "+e.getDate()+" "+e.getHours()+" "+e.getMinutes()+" "+e.getSeconds()}function n(){return s||t()}function r(t,e){return Math.floor(Math.random()*(e-t))+t}function u(t){return 33-new Date(t.getFullYear(),t.getMonth(),33).getDate()}var a=new Date,s=null;return{getRandomDate:t,getParamString:e,getGeneratedDate:n}}();var APP=APP||{};APP.createNamespace("APP.models.inputs"),APP.createNamespace("APP.models.buttons"),APP.createNamespace("APP.models.outputs"),APP.models=function(){function t(){var t=document.getElementsByClassName("submit-task"),u=document.getElementsByClassName("result-value");e.firstInput=document.getElementById("task1-value"),e.secondInput=document.getElementById("task2-value"),e.thirdInput=document.getElementById("task3-value"),e.dateInput=document.getElementById("task3-date"),n.submitFirstTask=t[0],n.submitSecondTask=t[1],n.submitThirdTask=t[2],n.generateDate=document.getElementsByClassName("generate-date")[0],r.firstResultBlock=u[0],r.secondResultBlock=u[1],r.thirdResultBlock=u[2]}var e={firstInput:null,secondInput:null,thirdInput:null,dateInput:null},n={submitFirstTask:null,submitSecondTask:null,submitThirdTask:null,generateDate:null},r={firstResultBlock:null,secondResultBlock:null,thirdResultBlock:null};return{inputs:e,outputs:r,buttons:n,init:t}}();var APP=APP||{};APP.createNamespace("APP.tasks.calculator"),APP.tasks.calculator=function(){function t(t){var r=0,u=[],a=0,s="Invalid value",o="",i="",l=",",c=/[+-]?[0-9]+(\.[0-9]+)?|[-+*\/]/g;if(!n(t))return s;if(o=t.replace(/([^0-9])\./g,"$1"),o=o.replace(/[^0-9.+\-*\/=]/g,""),o=o.replace(/([0-9])\.([^0-9])/g,"$1$2"),o=o.substring(0,o.indexOf("=")+1),i=o,o=o.replace(/([^-+*\/])[+]([^-+*\/])/g,"$1++$2"),o=o.replace(/([^-+*\/])[-]([^-+*\/])/g,"$1+-$2"),!(u=o.match(c))||u.length<1)return s;if("+"===(l=u[u.length-1])||"-"===l||"*"===l||"/"===l)return s;for(r=+u[0],a=1;a<u.length-1;a++)switch(u[a]){case"+":r+=+u[a+1];break;case"-":r-=+u[a+1];break;case"*":r*=+u[a+1];break;case"/":r/=+u[a+1];break;case"=":break;default:continue}return i+e(r,2)}function e(t,e){var n=Math.pow(10,e);return(Math.round(t*n)/n).toFixed(e)}function n(t){return!!/^[^*\/=]*[0-9][^=]*=[^=]*$/.test(t)&&(!/\/\*|\*\/|\/\/|\*\*/g.test(t)&&!/[-+*\/]{3,}/g.test(t)&&!/[0-9]+\.[0-9]+\.[0-9]+/g.test(t))}return{calculate:t}}();var APP=APP||{};window.onload=function(){var t=APP.tasks.calculator,e=APP.tasks.stringReplacer,n=APP.tasks.dateFormater,r=APP.utilities.dateGenerator,u=APP.models;u.init(),Date.prototype.format=function(t,e){return n.showFormatedDate(t,e)},u.buttons.submitFirstTask.addEventListener("click",function(){var e=t.calculate(u.inputs.firstInput.value);u.outputs.firstResultBlock.innerHTML=e}),u.buttons.submitSecondTask.addEventListener("click",function(){var t=e.replaceDuplicatedLettersInString(u.inputs.secondInput.value);u.outputs.secondResultBlock.innerHTML=t}),u.buttons.submitThirdTask.addEventListener("click",function(){var t=u.inputs.dateInput.value,e={},a="",s=t.split(" ").filter(function(t){return""!==t});return console.log(s),s||6===s.length?(e=new Date(s[0],s[1],s[2],s[3],s[4],s[5]),e.getFullYear()?(a=n.showFormatedDate(u.inputs.thirdInput.value,"en-US",e),void(u.outputs.thirdResultBlock.innerHTML=a)):(u.buttons.generateDate.click(),a=n.showFormatedDate(u.inputs.thirdInput.value,"en-US",r.getGeneratedDate()),void(u.outputs.thirdResultBlock.innerHTML=a))):(u.buttons.generateDate.click(),a=n.showFormatedDate(u.inputs.thirdInput.value,"en-US",r.getGeneratedDate()),void(u.outputs.thirdResultBlock.innerHTML=a))}),u.inputs.dateInput.addEventListener("input",function(){u.inputs.dateInput.value=u.inputs.dateInput.value.replace(/[^0-9\s]/g,"")}),u.buttons.generateDate.addEventListener("click",function(){u.inputs.dateInput.value=r.getParamString()})};var APP=APP||{};APP.createNamespace("APP.tasks.stringReplacer"),APP.tasks.stringReplacer=function(){function t(t){var u=[],a={},s=[],o=t;return u=t.split(/[.?,;:!]|\s/).filter(function(t){return""!==t}),u.length<2?o:(a=e(u),s=n(a.word),s=s.filter(function(t){var e=0;for(e=0;e<u.length;e+=1)if(a.ind!==e&&-1===u[e].indexOf(t))return!1;return!0}),o=r(s,o),o.join(""))}function e(t){var e=1,n={word:t[0],ind:0};for(e=1;e<t.length;e++)n.word.length>t[e].length&&(n.word=t[e],n.ind=e);return n}function n(t){var e=0,n=t.toLowerCase(),r=[];for(e=0;e<n.length;e+=1)-1===r.indexOf(n[e])&&r.push(n[e]);return r}function r(t,e){var n=0,r=0,u=e.split("");for(n=0;n<u.length;n++)for(r=0;r<t.length;r++)if(u[n].toLowerCase()===t[r]){u[n]="";break}return u}return{replaceDuplicatedLettersInString:t}}();var APP=APP||{};APP.createNamespace("APP.tasks.dateFormater"),APP.tasks.dateFormater=function(){function t(t,e){for(var n=String(t),r=e||2;n.length<r;)n="0"+n;return n}function e(t,e,n){var o=null,i="";return o=n||new Date,i=e||"en-US",a=r(i),t.replace(u,function(t){return s[t](o)})}function n(t,e){return t.substr(0,e)}function r(t){var e={};switch(t.toLowerCase()){case"ru-ru":e.monthNames=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];break;default:e.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"]}return e}var u=/M{1,4}|yy(?:yy)?|([HMhmsd])\1?/g,a={},s={yy:function(t){return String(t.getFullYear()).substr(2)},yyyy:function(e){return t(e.getFullYear(),4)},M:function(t){return t.getMonth()+1},MM:function(e){return t(e.getMonth()+1)},MMM:function(t){return n(a.monthNames[t.getMonth()],3)},MMMM:function(t){return a.monthNames[t.getMonth()]},d:function(t){return t.getDay()+1},dd:function(e){return t(e.getDay()+1)},H:function(t){return t.getHours()},HH:function(e){return t(e.getHours())},h:function(t){return t.getHours()%12||12},hh:function(e){return t(e.getHours()%12||12)},m:function(t){return t.getMinutes()},mm:function(e){return t(e.getMinutes())},s:function(t){return t.getSeconds()},ss:function(e){return t(e.getSeconds())}};return{showFormatedDate:e}}();